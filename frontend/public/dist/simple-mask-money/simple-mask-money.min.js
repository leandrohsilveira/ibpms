!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.SimpleMaskMoney=t()}(this,function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),r=function(){function r(e){!function(e,t){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),this.allowNegative=!1,this.negativeSignAfter=!1,this.decimalSeparator=",",this.fixed=!0,this.fractionDigits=2,this.prefix="",this.suffix="",this.thousandsSeparator=".",this.cursor="move",this.merge(e)}return t(r,[{key:"merge",value:function(t){t&&"object"===(void 0===t?"undefined":e(t))&&(this.fixed="boolean"==typeof t.fixed?t.fixed:this.fixed,this.allowNegative="boolean"==typeof t.allowNegative?t.allowNegative:this.allowNegative,this.negativeSignAfter="boolean"==typeof t.negativeSignAfter?t.negativeSignAfter:this.negativeSignAfter,this.decimalSeparator=void 0===t.decimalSeparator?this.decimalSeparator:t.decimalSeparator,this.fractionDigits=void 0===t.fractionDigits?this.fractionDigits:t.fractionDigits,this.prefix=void 0===t.prefix?this.prefix:t.prefix,this.suffix=void 0===t.suffix?this.suffix:t.suffix,this.thousandsSeparator=void 0===t.thousandsSeparator?this.thousandsSeparator:t.thousandsSeparator,this.cursor=void 0===t.cursor?this.cursor:t.cursor)}}]),r}(),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=function(){function e(t){!function(t,r){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.args=new r(t)}return i(e,[{key:"completer",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return this.args.fixed?t("",e,"0"):t("",e,"_");function t(e,t,r){for(var i=e,n=0;n<t;n++)i+=r;return i}}},{key:"emptyOrInvalid",value:function(){return""+this.completer()+this.args.decimalSeparator+this.completer(this.args.fractionDigits)}},{key:"onlyNumber",value:function(e){for(var t="",r=0;r<e.length;r++)isFinite(e[r])&&(t+=e[r]);return t}},{key:"addingPrefix",value:function(e){return""+this.args.prefix+e}},{key:"removingPrefix",value:function(e){return e.replace(this.args.prefix,"")}},{key:"addingSuffix",value:function(e){return""+e+this.args.suffix}},{key:"removingSuffix",value:function(e){return e.includes(this.args.suffix,e.length-this.args.fractionDigits)?e.replace(this.args.suffix,""):e.substring(0,e.length-1)}},{key:"addingCompleterFromStart",value:function(e,t){for(;e.length<this.args.fractionDigits;)e=""+t+e;return e}},{key:"addingCompleterFromEnd",value:function(e,t){for(;e.length<this.args.fractionDigits;)e=""+e+t;return e}},{key:"removingCompleterFromStart",value:function(e,t){for(;e[0]===t;)e=e.replace(t,"");return e}},{key:"removingCompleterFromEnd",value:function(e,t){for(;e[e.length-1]===t;)e=e.substring(0,e.length-1);return e}},{key:"addingAutoComplete",value:function(e){return""+e+this.addingCompleterFromEnd("","0")}},{key:"autoComplete",value:function(e){var t=new RegExp("\\"+this.args.decimalSeparator,"g");return 1<(e.match(t)||[]).length&&(e=this.addingAutoComplete(e)),e}},{key:"addingDecimalSeparator",value:function(e,t,r){var i=e.length-this.args.fractionDigits,n=void 0,a="$1",o=t,s=isFinite(t)?"d":"w";return n="(\\"+s+"{"+this.args.fractionDigits+"})",0<i&&(n="(\\"+s+"{"+i+"})"+n,o=a,a="$2"),e.replace(new RegExp(n),""+o+r+a)}},{key:"addingHundredsSeparator",value:function(e){for(var t=e.length-this.args.fractionDigits,r=Math.ceil(t/3),i="(\\d)",n=this.args.decimalSeparator+"$"+(r+1),a=r;0!==a;a--)3<=t?(i="(\\d{3})"+i,t-=3):i="(\\d{"+t+"})"+i,n=1<a?this.args.thousandsSeparator+"$"+a+n:"$"+a+n;return e.replace(new RegExp(i),n)}},{key:"removeSeparator",value:function(e,t){return e.replace(new RegExp("\\"+t,"g"),"")}},{key:"formatDecimal",value:function(e,t,r){return e=this.addingCompleterFromStart(e,t),this.addingDecimalSeparator(e,t,r)}},{key:"textToNumber",value:function(e){var t=e.toString(),r=this.completer();return this.args.prefix&&(t=this.removingPrefix(t)),this.args.suffix&&(t=this.removingSuffix(t)),t=this.removeSeparator(t,this.args.thousandsSeparator),t=this.removeSeparator(t,this.args.decimalSeparator),t=this.onlyNumber(t),(t=this.removingCompleterFromStart(t,r))||(this.args.fixed?"0":"")}},{key:"numberToText",value:function(e){var t=this.emptyOrInvalid();return isNaN(parseFloat(e))||(t=e.length<=this.args.fractionDigits?this.formatDecimal(e,this.completer(),this.args.decimalSeparator):this.addingHundredsSeparator(e)),this.args.prefix&&(t=this.addingPrefix(t)),this.args.suffix&&(t=this.addingSuffix(t)),t}}]),e}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=new r,s=new n(o);return function(){function e(){!function(t,r){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),o=new r,s=new n(o),Object.defineProperty(this,"args",{get:function(){return o},set:function(e){o=new r(e),s=new n(o)}}),this.formatToNumber=e.formatToNumber,this.format=e.format,this.setMask=e.setMask}return a(e,null,[{key:"format",value:function(e){var t=o.allowNegative&&-1!==e.indexOf("-"),r=s.numberToText(s.textToNumber(e));return(!o.negativeSignAfter&&t?"-":"")+r+(o.negativeSignAfter&&t?"-":"")}},{key:"formatToNumber",value:function(e){var t="0",r=s.textToNumber(e),i=o.allowNegative&&-1!==e.indexOf("-");if(i&&r.replace("-",""),!isNaN(parseFloat(r))){if(r.length<=o.fractionDigits)r=s.formatDecimal(r,"0",".");else{var n=r.length-o.fractionDigits;r=r.replace(new RegExp("(\\d{"+n+"})(\\d{"+o.fractionDigits+"})"),"$1.$2")}t=r}return parseFloat(i?-1*t:t)}},{key:"setMask",value:function(t,r){if("undefined"==typeof document)throw"This function only works on client side";var i="string"==typeof t?document.querySelector(t):t;return r&&(e.args=r),i.addEventListener("input",function(t){var r=i.value,n=e.format(r),a=function(e){var t=-1;if("selectionStart"in e)t=e.selectionStart;else if(document.selection){e.focus();var r=document.selection.createRange(),i=document.selection.createRange().text.length;r.moveStart("character",-e.value.length),t=r.text.length-i}return t}(i)-function(e,t){var r=void 0;switch(!0){case t.length<e.length:r=-1;break;case t.length>e.length:r=1;break;default:r=0}return r}(n,r),o=e.args.cursor;"start"===o?a=0:"end"===o&&(a=n.length),i.value=n,i._value=n,function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",t),r.select()}}(i,a),!(t instanceof Event)&&i.dispatchEvent(new Event("input"))}),i.formatToNumber=function(){return e.formatToNumber(i.value)},i}},{key:"args",get:function(){return o},set:function(e){o=new r(e),s=new n(o)}}]),e}()});